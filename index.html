<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BananaPuck Dashboard</title>

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    defer
  ></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <h1>BananaPuck Dashboard</h1>

  <!-- ALERTS -->
  <section>
    <h2>Alerts</h2>
    <button id="activeAlertsBtn" class="selected">Active</button>
    <button id="historyAlertsBtn">History</button>
    <button id="clearAlertsBtn">Clear Active</button>
    <button id="callUserBtn">Call User (Vibrate)</button>

    <div id="alertsContainer"></div>
  </section>

  <!-- VITALS -->
  <section>
    <h2>Vitals</h2>
    <p>Heart Rate: <span id="heartRate">--</span> bpm</p>
    <p>Respiration: <span id="respirationRate">--</span> breaths/min</p>
    <p>Temperature: <span id="temperature">--</span> Â°C</p>
  </section>

  <!-- MOTION -->
  <section>
    <h2>Motion & Orientation</h2>

    <p>Roll: <span id="roll">--</span></p>
    <p>Pitch: <span id="pitch">--</span></p>
    <p>Yaw: <span id="yaw">--</span></p>

    <h3>Acceleration</h3>
    <p id="accelX">X: --</p>
    <p id="accelY">Y: --</p>
    <p id="accelZ">Z: --</p>

    <h3>Gyroscope</h3>
    <p id="gyroX">X: --</p>
    <p id="gyroY">Y: --</p>
    <p id="gyroZ">Z: --</p>
  </section>

  <!-- LOCATION -->
  <section>
    <h2>Environment & Position</h2>

    <button id="btnMapNewLocation">Map out new location</button>

    <h3>GPS</h3>
    <p>Lat: <span id="gpsLat">--</span></p>
    <p>Lon: <span id="gpsLon">--</span></p>
    <p>Accuracy: <span id="gpsAcc">--</span> m</p>

    <div id="map" style="height: 300px; margin-top: 10px;"></div>

    <p>Water Submerged: <span id="waterSub">--</span></p>
    <p>Last Update: <span id="lastUpdate">--</span></p>
  </section>

  <!-- HISTORY MODAL -->
  <div id="historyModalOverlay" class="hidden">
    <div id="historyModal">
      <h3 id="modalTitle"></h3>
      <select id="historyWindow">
        <option value="1">1 hour</option>
        <option value="6">6 hours</option>
        <option value="24" selected>24 hours</option>
      </select>

      <canvas id="historyChart"></canvas>

      <table>
        <thead>
          <tr><th>Time</th><th>Value</th></tr>
        </thead>
        <tbody id="historyTableBody"></tbody>
      </table>

      <button id="closeModalBtn">Close</button>
    </div>
  </div>

  <!-- MAPPING MODAL -->
  <div id="mappingModal" class="hidden">
    <div class="modal-box">
      <h3>Map New Location</h3>

      <input id="locationName" placeholder="Location name (Home, Living Room)" />
      <button id="createLocationBtn">Start Mapping</button>

      <div id="mappingStep" class="hidden">
        <p>Walk slowly and take photos as instructed.</p>
        <input type="file" id="photoInput" accept="image/*" multiple />
        <button id="uploadPhotosBtn">Upload Photos</button>
      </div>

      <p id="mappingStatus"></p>
      <div id="photoGallery"></div>

      <button id="closeMappingModal">Close</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
