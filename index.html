<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BananaPuck Live Dashboard</title>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="header">
    BananaPuck Live Dashboard
  </header>

  <!-- MAP -->
  <section id="map-section">
    <div id="map"></div>
  </section>

  <!-- ALERTS -->
  <section class="panel">
    <h2>Alerts</h2>
    <div class="alert-controls">
      <button onclick="showActiveAlerts()">Active</button>
      <button onclick="showAlertHistory()">History</button>
      <button onclick="clearActiveAlerts()">Clear Active</button>
      <button onclick="callUser()">Call User (Vibrate)</button>
      <select id="alertRange">
        <option>Last hour</option>
        <option>Last 12 hours</option>
        <option>Last day</option>
        <option>Last week</option>
        <option>Last month</option>
      </select>
    </div>
    <div id="alerts-container"></div>
  </section>

  <!-- VITALS -->
  <section class="panel">
    <h2>Vitals</h2>
    <div class="card-grid">
      <div class="card" onclick="openHistory('hr')">
        <h3>Heart Rate</h3>
        <div id="hr">--</div>
      </div>

      <div class="card" onclick="openHistory('breathing')">
        <h3>Respiration</h3>
        <div id="breathing">--</div>
      </div>

      <div class="card" onclick="openHistory('temp')">
        <h3>Temperature</h3>
        <div id="temp">--</div>
      </div>

      <div class="card" onclick="openHistory('ecg')">
        <h3>ECG</h3>
        <div id="ecg">--</div>
      </div>
    </div>
  </section>

  <!-- MOTION -->
  <section class="panel">
    <h2>Motion & Orientation</h2>

    <div class="card-grid">
      <div class="card" onclick="openHistory('accel')">
        <h3>Acceleration</h3>
        <div>X: <span id="ax">--</span></div>
        <div>Y: <span id="ay">--</span></div>
        <div>Z: <span id="az">--</span></div>
      </div>

      <div class="card" onclick="openHistory('gyro')">
        <h3>Gyroscope</h3>
        <div>X: <span id="gx">--</span></div>
        <div>Y: <span id="gy">--</span></div>
        <div>Z: <span id="gz">--</span></div>
      </div>

      <div class="card" onclick="openHistory('orientation')">
        <h3>Orientation</h3>
        <div>Roll: <span id="roll">--</span></div>
        <div>Pitch: <span id="pitch">--</span></div>
        <div>Yaw: <span id="yaw">--</span></div>
      </div>
    </div>
  </section>

  <!-- ENVIRONMENT -->
  <section class="panel">
    <h2>Environment & Position</h2>

    <div class="card-grid">
      <div class="card" onclick="openHistory('gps')">
        <h3>GPS</h3>
        <div>Lat: <span id="lat">--</span></div>
        <div>Lon: <span id="lon">--</span></div>
        <div>Accuracy: <span id="gps-acc">--</span></div>
      </div>

      <div class="card" onclick="openHistory('water')">
        <h3>Water Submergence</h3>
        <div id="water">--</div>
      </div>

      <div class="card">
        <h3>Last Update</h3>
        <div id="lastUpdate">--</div>
      </div>
    </div>
  </section>

  <!-- LOCATION MAPPING MODAL -->
  <div id="mappingModal" class="modal hidden">
    <div class="modal-content">
      <h2>Map Out New Location</h2>
      <input id="locationName" placeholder="Home, Living Room…" />
      <ol>
        <li>Start at the front door</li>
        <li>Hold phone at chest height</li>
        <li>Photo every 3–6 steps</li>
        <li>Extra photos at corners</li>
        <li>Bottom / middle / top of stairs</li>
      </ol>
      <input type="file" multiple />
      <button>Upload Photos</button>
      <button onclick="closeMapping()">Close</button>
    </div>
  </div>

  <!-- HISTORY MODAL -->
  <div id="historyModal" class="modal hidden">
    <div class="modal-content">
      <h2 id="historyTitle"></h2>
      <canvas id="historyChart"></canvas>
      <button onclick="closeHistory()">Close</button>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>
</html>
