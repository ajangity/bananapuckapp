<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BananaPuck Exercise Tracker</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="BananaPuck">
  <link rel="apple-touch-icon" href="icon-192.png">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f6f8;
    }

    header {
      background: #f5c400;
      color: white;
      text-align: center;
      padding: 32px 10px;
      font-size: 38px;
      font-weight: bold;
    }

    .top-controls {
      padding: 15px 25px;
      background: white;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .control-buttons {
      display: flex;
      gap: 8px;
    }

    .settings-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: #555;
      padding: 8px;
      border-radius: 8px;
    }

    .settings-btn:hover {
      background: rgba(0, 0, 0, 0.06);
    }

    .page-title {
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }

    section {
      padding: 25px;
    }

    h2 {
      margin-bottom: 15px;
      color: #333;
      font-size: 22px;
      border-bottom: 2px solid #f5c400;
      padding-bottom: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      text-align: center;
    }

    .card-title {
      font-weight: bold;
      font-size: 14px;
      color: #555;
      margin-bottom: 10px;
    }

    .card-value {
      font-size: 32px;
      font-weight: bold;
      color: #f5c400;
      margin-bottom: 5px;
    }

    .card-label {
      font-size: 12px;
      color: #7f8c8d;
    }

    .habit-form {
      background: white;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
      color: #333;
      font-size: 14px;
    }

    .form-group input[type="text"],
    .form-group input[type="time"],
    .form-group input[type="date"],
    .form-group input[type="number"],
    .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #f5c400;
      box-shadow: 0 0 0 3px rgba(245, 196, 0, 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .form-row-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 15px;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: #f5c400;
      color: white;
    }

    .btn-primary:hover {
      background: #d4a700;
    }

    .btn-secondary {
      background: #ecf0f1;
      color: #333;
    }

    .btn-secondary:hover {
      background: #dde1e6;
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
      background: #e74c3c;
      color: white;
    }

    .btn-small:hover {
      background: #c0392b;
    }

    .activity-list {
      background: white;
      border-radius: 14px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .activity-item {
      padding: 15px 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-info {
      flex: 1;
    }

    .activity-title {
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 5px;
    }

    .activity-details {
      font-size: 12px;
      color: #7f8c8d;
      margin-bottom: 3px;
    }

    .activity-meta {
      font-size: 11px;
      color: #95a5a6;
    }

    .intensity-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: bold;
    }

    .intensity-light {
      background: #cce5ff;
      color: #004085;
    }

    .intensity-moderate {
      background: #fff3cd;
      color: #856404;
    }

    .intensity-high {
      background: #f8d7da;
      color: #721c24;
    }

    .intensity-vigorous {
      background: #f8d7da;
      color: #721c24;
    }

    .chart-container {
      position: relative;
      height: 300px;
      margin: 20px 0;
      background: white;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #eee;
    }

    .tab-btn {
      padding: 12px 20px;
      border: none;
      background: none;
      cursor: pointer;
      font-weight: bold;
      color: #7f8c8d;
      border-bottom: 3px solid transparent;
      transition: all 0.2s ease;
    }

    .tab-btn.active {
      color: #f5c400;
      border-bottom-color: #f5c400;
    }

    .stretch-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
    }

    .stretch-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stretch-item input[type="checkbox"] {
      cursor: pointer;
      width: 18px;
      height: 18px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: white;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }

    th {
      background: #f5f5f5;
      font-weight: bold;
    }

    tr:hover {
      background: #f9f9f9;
    }
  </style>
</head>

<body>

<header>
  üí™ Exercise Tracker
</header>

<div class="top-controls">
  <div class="page-title">Track Your Activity & Exercise</div>
  <div class="control-buttons">
    <button class="settings-btn" onclick="window.location.href='index.html'" title="Back to Dashboard">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 12L5 10M5 10L12 3L19 10M5 10V20C5 20.5523 5.44772 21 6 21H9C9.55228 21 10 20.5523 10 20V16C10 15.4477 10.4477 15 11 15H13C13.5523 15 14 15.4477 14 16V20C14 20.5523 14.4477 21 15 21H18C18.5523 21 19 20.5523 19 20V10M19 10L21 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M9 21V12M15 21V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    <button class="settings-btn" onclick="window.location.href='settings.html'" title="Settings">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 8.5A3.5 3.5 0 1 0 12 15.5A3.5 3.5 0 1 0 12 8.5Z" stroke="currentColor" stroke-width="2"/>
        <path d="M19.4 15A1.7 1.7 0 0 0 19.7 16.9L19.8 17.1A2 2 0 1 1 17.1 19.8L16.9 19.7A1.7 1.7 0 0 0 15 19.4 A1.7 1.7 0 0 0 14 20.9V21A2 2 0 1 1 10 21V20.9 A1.7 1.7 0 0 0 9 19.4 A1.7 1.7 0 0 0 7.1 19.7L6.9 19.8 A2 2 0 1 1 4.2 17.1L4.3 16.9 A1.7 1.7 0 0 0 4.6 15 A1.7 1.7 0 0 0 3.1 14H3 A2 2 0 1 1 3 10H3.1 A1.7 1.7 0 0 0 4.6 9 A1.7 1.7 0 0 0 4.3 7.1L4.2 6.9 A2 2 0 1 1 6.9 4.2L7.1 4.3 A1.7 1.7 0 0 0 9 4.6 A1.7 1.7 0 0 0 10 3.1V3 A2 2 0 1 1 14 3V3.1 A1.7 1.7 0 0 0 15 4.6 A1.7 1.7 0 0 0 16.9 4.3L17.1 4.2 A2 2 0 1 1 19.8 6.9L19.7 7.1 A1.7 1.7 0 0 0 19.4 9 A1.7 1.7 0 0 0 20.9 10H21 A2 2 0 1 1 21 14H20.9 A1.7 1.7 0 0 0 19.4 15Z" stroke="currentColor" stroke-width="2"/>
      </svg>
    </button>
  </div>
</div>

<!-- STATS -->
<section>
  <h2>Your Exercise Statistics</h2>
  <div class="grid">
    <div class="card">
      <div class="card-title">This Week</div>
      <div class="card-value" id="weeklyMinutes">0</div>
      <div class="card-label">minutes of exercise</div>
    </div>
    <div class="card">
      <div class="card-title">Steps Today</div>
      <div class="card-value" id="stepsCount">0</div>
      <div class="card-label">steps</div>
    </div>
    <div class="card">
      <div class="card-title">Workouts This Week</div>
      <div class="card-value" id="workoutCount">0</div>
      <div class="card-label">workouts</div>
    </div>
    <div class="card">
      <div class="card-title">Streak</div>
      <div class="card-value" id="exerciseStreak">0</div>
      <div class="card-label">days</div>
    </div>
  </div>
</section>

<!-- WEEKLY CHART -->
<section>
  <h2>Weekly Exercise Minutes</h2>
  <div class="chart-container">
    <canvas id="exerciseChart"></canvas>
  </div>
</section>

<!-- TABS -->
<section>
  <h2>Log Exercise</h2>
  <div class="tabs">
    <button class="tab-btn active" onclick="switchExerciseTab('workout')">Workout</button>
    <button class="tab-btn" onclick="switchExerciseTab('activity')">Activity</button>
    <button class="tab-btn" onclick="switchExerciseTab('stretch')">Stretching</button>
  </div>

  <!-- WORKOUT TAB -->
  <div id="workout" class="tab-content" style="display: block;">
    <div class="habit-form">
      <h3 style="margin-top: 0;">Log a Workout</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Workout Type</label>
          <select id="workoutType">
            <option value="">Select type...</option>
            <option value="cardio">üèÉ Cardio (Running, Cycling)</option>
            <option value="strength">üí™ Strength Training</option>
            <option value="yoga">üßò Yoga</option>
            <option value="pilates">ü§∏ Pilates</option>
            <option value="sports">‚öΩ Sports</option>
            <option value="other">üèãÔ∏è Other</option>
          </select>
        </div>
        <div class="form-group">
          <label>Duration (minutes)</label>
          <input type="number" id="workoutDuration" placeholder="e.g., 45" min="1">
        </div>
        <div class="form-group">
          <label>Intensity</label>
          <select id="workoutIntensity">
            <option value="">Select...</option>
            <option value="light">Light</option>
            <option value="moderate">Moderate</option>
            <option value="high">High</option>
          </select>
        </div>
        <div class="form-group">
          <label>Date</label>
          <input type="date" id="workoutDate">
        </div>
      </div>
      <div class="form-group">
        <label>Notes</label>
        <input type="text" id="workoutNotes" placeholder="e.g., Felt great, PR on bench press">
      </div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="logWorkout()">Log Workout</button>
        <button class="btn btn-secondary" onclick="clearWorkoutForm()">Clear</button>
      </div>
    </div>
  </div>

  <!-- ACTIVITY TAB -->
  <div id="activity" class="tab-content" style="display: none;">
    <div class="habit-form">
      <h3 style="margin-top: 0;">Log Daily Activity</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Activity Type</label>
          <select id="activityType">
            <option value="">Select activity...</option>
            <option value="walking">üö∂ Walking</option>
            <option value="running">üèÉ Running</option>
            <option value="cycling">üö¥ Cycling</option>
            <option value="swimming">üèä Swimming</option>
            <option value="hiking">‚õ∞Ô∏è Hiking</option>
            <option value="other">üèÉ Other</option>
          </select>
        </div>
        <div class="form-group">
          <label>Duration (minutes)</label>
          <input type="number" id="activityDuration" placeholder="e.g., 30" min="1">
        </div>
        <div class="form-group">
          <label>Intensity</label>
          <select id="activityIntensity">
            <option value="">Select...</option>
            <option value="light">Light</option>
            <option value="moderate">Moderate</option>
            <option value="vigorous">Vigorous</option>
          </select>
        </div>
        <div class="form-group">
          <label>Steps (optional)</label>
          <input type="number" id="activitySteps" placeholder="e.g., 5000">
        </div>
      </div>
      <div class="form-group">
        <label>Notes</label>
        <input type="text" id="activityNotes" placeholder="e.g., Location, how you felt">
      </div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="logActivity()">Log Activity</button>
        <button class="btn btn-secondary" onclick="clearActivityForm()">Clear</button>
      </div>
    </div>
  </div>

  <!-- STRETCHING TAB -->
  <div id="stretch" class="tab-content" style="display: none;">
    <div class="habit-form">
      <h3 style="margin-top: 0;">Stretch Session</h3>
      <div class="stretch-grid">
        <div class="stretch-item">
          <input type="checkbox" id="neck">
          <label for="neck">Neck</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="shoulders">
          <label for="shoulders">Shoulders</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="arms">
          <label for="arms">Arms</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="wrists">
          <label for="wrists">Wrists</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="back">
          <label for="back">Back</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="core">
          <label for="core">Core</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="hips">
          <label for="hips">Hips</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="legs">
          <label for="legs">Legs</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="hamstrings">
          <label for="hamstrings">Hamstrings</label>
        </div>
        <div class="stretch-item">
          <input type="checkbox" id="calves">
          <label for="calves">Calves</label>
        </div>
      </div>
      <div class="form-group" style="margin-top: 15px;">
        <label>Duration (minutes)</label>
        <input type="number" id="stretchDuration" placeholder="e.g., 15" min="1">
      </div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="logStretch()">Log Stretch Session</button>
        <button class="btn btn-secondary" onclick="clearStretchForm()">Clear</button>
      </div>
    </div>
  </div>
</section>

<!-- EXERCISE HISTORY -->
<section>
  <h2>Recent Exercise</h2>
  <div class="activity-list" id="exerciseHistory">
    <div class="activity-item">
      <div class="activity-info">
        <div class="activity-title">No exercises logged yet</div>
        <div class="activity-meta">Start logging your activity to see your history</div>
      </div>
    </div>
  </div>
</section>

<!-- DETAILED LOG -->
<section>
  <h2>Detailed Exercise Log</h2>
  <table id="exerciseTable" style="display:none;">
    <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Activity</th>
        <th>Duration</th>
        <th>Intensity</th>
        <th>Notes</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="exerciseTableBody"></tbody>
  </table>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  let exerciseChart;

  document.addEventListener('DOMContentLoaded', function() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('workoutDate').value = today;
    loadExerciseData();
    initChart();
  });

  function switchExerciseTab(tab) {
    document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
    document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
    document.getElementById(tab).style.display = 'block';
    event.target.classList.add('active');
  }

  function logWorkout() {
    const type = document.getElementById('workoutType').value;
    const duration = document.getElementById('workoutDuration').value;
    const intensity = document.getElementById('workoutIntensity').value;
    const date = document.getElementById('workoutDate').value;
    const notes = document.getElementById('workoutNotes').value;

    if (!type || !duration || !intensity || !date) {
      alert('Please fill in all required fields');
      return;
    }

    const workoutData = {
      category: 'workout',
      type: type,
      duration: parseInt(duration),
      intensity: intensity,
      date: date,
      notes: notes,
      timestamp: new Date().toISOString()
    };

    let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
    exercises.push(workoutData);
    localStorage.setItem('exercises', JSON.stringify(exercises));

    clearWorkoutForm();
    loadExerciseData();
    alert('Workout logged successfully!');
  }

  function clearWorkoutForm() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('workoutType').value = '';
    document.getElementById('workoutDuration').value = '';
    document.getElementById('workoutIntensity').value = '';
    document.getElementById('workoutDate').value = today;
    document.getElementById('workoutNotes').value = '';
  }

  function logActivity() {
    const type = document.getElementById('activityType').value;
    const duration = document.getElementById('activityDuration').value;
    const intensity = document.getElementById('activityIntensity').value;
    const steps = document.getElementById('activitySteps').value;
    const notes = document.getElementById('activityNotes').value;

    if (!type || !duration || !intensity) {
      alert('Please fill in all required fields');
      return;
    }

    const activityData = {
      category: 'activity',
      type: type,
      duration: parseInt(duration),
      intensity: intensity,
      steps: steps ? parseInt(steps) : 0,
      date: new Date().toISOString().split('T')[0],
      notes: notes,
      timestamp: new Date().toISOString()
    };

    let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
    exercises.push(activityData);
    localStorage.setItem('exercises', JSON.stringify(exercises));

    clearActivityForm();
    loadExerciseData();
    alert('Activity logged successfully!');
  }

  function clearActivityForm() {
    document.getElementById('activityType').value = '';
    document.getElementById('activityDuration').value = '';
    document.getElementById('activityIntensity').value = '';
    document.getElementById('activitySteps').value = '';
    document.getElementById('activityNotes').value = '';
  }

  function logStretch() {
    const duration = document.getElementById('stretchDuration').value;
    const areas = Array.from(document.querySelectorAll('.stretch-grid input:checked')).map(cb => cb.nextElementSibling.textContent);

    if (!duration || areas.length === 0) {
      alert('Please select areas and enter duration');
      return;
    }

    const stretchData = {
      category: 'stretch',
      type: 'stretching',
      duration: parseInt(duration),
      areas: areas,
      date: new Date().toISOString().split('T')[0],
      timestamp: new Date().toISOString()
    };

    let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
    exercises.push(stretchData);
    localStorage.setItem('exercises', JSON.stringify(exercises));

    clearStretchForm();
    loadExerciseData();
    alert('Stretch session logged!');
  }

  function clearStretchForm() {
    document.querySelectorAll('.stretch-grid input[type="checkbox"]').forEach(cb => cb.checked = false);
    document.getElementById('stretchDuration').value = '';
  }

  function loadExerciseData() {
    let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
    const weekAgo = new Date();
    weekAgo.setDate(weekAgo.getDate() - 7);

    const thisWeek = exercises.filter(e => new Date(e.date) >= weekAgo);
    const weeklyMinutes = thisWeek.reduce((sum, e) => sum + (e.duration || 0), 0);
    const totalSteps = thisWeek.reduce((sum, e) => sum + (e.steps || 0), 0);
    const workoutCount = thisWeek.filter(e => e.category === 'workout').length;

    document.getElementById('weeklyMinutes').textContent = weeklyMinutes;
    document.getElementById('stepsCount').textContent = totalSteps.toLocaleString();
    document.getElementById('workoutCount').textContent = workoutCount;

    renderExerciseHistory(exercises);
    renderExerciseTable(exercises);
  }

  function renderExerciseHistory(exercises) {
    let html = '';
    if (exercises.length === 0) {
      html = '<div class="activity-item"><div class="activity-info"><div class="activity-title">No exercises logged yet</div></div></div>';
    } else {
      exercises.slice().reverse().slice(0, 15).forEach(exercise => {
        const intensityClass = `intensity-${exercise.intensity}`;
        let activityName = exercise.type;
        if (exercise.category === 'stretch') {
          activityName = 'Stretching - ' + exercise.areas.join(', ');
        }

        html += `
          <div class="activity-item">
            <div class="activity-info">
              <div class="activity-title">${activityName}</div>
              <div class="activity-details">${exercise.duration} minutes on ${new Date(exercise.date).toLocaleDateString()}</div>
              <div class="activity-meta">${exercise.notes || 'No notes'}</div>
            </div>
            <span class="intensity-badge ${intensityClass}">${exercise.intensity || 'moderate'}</span>
          </div>
        `;
      });
    }
    document.getElementById('exerciseHistory').innerHTML = html;

    if (exercises.length > 0) {
      document.getElementById('exerciseTable').style.display = 'table';
    }
  }

  function renderExerciseTable(exercises) {
    let html = '';
    exercises.slice().reverse().forEach(exercise => {
      let activityName = exercise.type;
      if (exercise.category === 'stretch') {
        activityName = 'Stretching';
      }

      html += `
        <tr>
          <td>${new Date(exercise.date).toLocaleDateString()}</td>
          <td>${exercise.category}</td>
          <td>${activityName}</td>
          <td>${exercise.duration} min</td>
          <td>${exercise.intensity || '-'}</td>
          <td>${exercise.notes || '-'}</td>
          <td><button class="btn-small" onclick="deleteExercise('${exercise.timestamp}')">Delete</button></td>
        </tr>
      `;
    });
    document.getElementById('exerciseTableBody').innerHTML = html;
  }

  function deleteExercise(timestamp) {
    if (confirm('Delete this entry?')) {
      let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
      exercises = exercises.filter(e => e.timestamp !== timestamp);
      localStorage.setItem('exercises', JSON.stringify(exercises));
      loadExerciseData();
    }
  }

  function initChart() {
    let exercises = JSON.parse(localStorage.getItem('exercises') || '[]');
    const last7Days = getLast7DaysExercise(exercises);

    const ctx = document.getElementById('exerciseChart').getContext('2d');
    exerciseChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: last7Days.dates,
        datasets: [{
          label: 'Minutes Exercised',
          data: last7Days.minutes,
          borderColor: '#e74c3c',
          backgroundColor: 'rgba(231, 76, 60, 0.1)',
          borderWidth: 2,
          fill: true,
          tension: 0.4,
          pointBackgroundColor: '#f5c400',
          pointBorderColor: '#e74c3c',
          pointRadius: 5,
          pointHoverRadius: 7
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: true, position: 'top' }
        },
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  }

  function getLast7DaysExercise(exercises) {
    const dates = [];
    const minutes = [];

    for (let i = 6; i >= 0; i--) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateStr = date.toISOString().split('T')[0];
      const dayName = date.toLocaleDateString('en-US', {weekday: 'short'});

      const dayExercises = exercises.filter(e => e.date === dateStr);
      const dayMinutes = dayExercises.reduce((sum, e) => sum + (e.duration || 0), 0);

      dates.push(dayName);
      minutes.push(dayMinutes);
    }

    return { dates, minutes };
  }
</script>

</body>
</html>
